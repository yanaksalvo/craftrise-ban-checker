<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CraftRise Ban Checker</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #fff;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 30px 0;
        }

        header h1 {
            font-size: 2.5rem;
            background: linear-gradient(90deg, #ff6b6b, #ffa502);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from {
                filter: drop-shadow(0 0 5px rgba(255, 107, 107, 0.3));
            }

            to {
                filter: drop-shadow(0 0 20px rgba(255, 107, 107, 0.6));
            }
        }

        header p {
            color: #8892b0;
            font-size: 1.1rem;
        }

        .credits {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .credit-badge {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            color: #8892b0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .credit-badge:hover {
            background: rgba(255, 107, 107, 0.2);
            border-color: rgba(255, 107, 107, 0.3);
            color: #ff6b6b;
        }

        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 15px 25px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-width: 120px;
            transition: transform 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-3px);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            display: block;
        }

        .stat-number.total {
            color: #74b9ff;
        }

        .stat-number.banned {
            color: #ff6b6b;
        }

        .stat-number.clean {
            color: #00d4aa;
        }

        .stat-number.maintenance {
            color: #ffc107;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #8892b0;
            margin-top: 5px;
        }

        .input-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 30px;
            margin-bottom: 30px;
        }

        .input-card h2 {
            color: #ff6b6b;
            margin-bottom: 20px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-card h2::before {
            content: 'üéÆ';
        }

        .input-description {
            color: #8892b0;
            font-size: 0.9rem;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        textarea {
            width: 100%;
            height: 150px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 107, 107, 0.3);
            border-radius: 12px;
            padding: 15px;
            color: #fff;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            resize: vertical;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #ff6b6b;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.2);
        }

        textarea::placeholder {
            color: #6c757d;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn {
            background: linear-gradient(90deg, #ff6b6b, #ffa502);
            color: #fff;
            border: none;
            padding: 15px 40px;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.4);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(255, 255, 255, 0.1);
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: none;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .progress-container {
            margin-top: 20px;
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ffa502);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .progress-text {
            text-align: center;
            margin-top: 10px;
            color: #8892b0;
            font-size: 0.9rem;
        }

        .results-container {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 1100px) {
            .results-container {
                grid-template-columns: 1fr;
            }
        }

        .column {
            min-height: 200px;
        }

        .column-header {
            padding: 15px 20px;
            border-radius: 15px 15px 0 0;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .column-header.banned {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid rgba(220, 53, 69, 0.3);
        }

        .column-header.clean {
            background: rgba(40, 167, 69, 0.2);
            border: 1px solid rgba(40, 167, 69, 0.3);
        }

        .column-header.maintenance {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid rgba(255, 193, 7, 0.3);
        }

        .column-header h3 {
            font-size: 1.1rem;
        }

        .column-header.banned h3 {
            color: #dc3545;
        }

        .column-header.clean h3 {
            color: #28a745;
        }

        .column-header.maintenance h3 {
            color: #ffc107;
        }

        .export-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            padding: 6px 12px;
            border-radius: 8px;
            color: #fff;
            font-size: 0.8rem;
            cursor: pointer;
            transition: background 0.3s;
        }

        .export-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .result-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            margin-bottom: 10px;
            transition: transform 0.2s ease;
        }

        .result-card:hover {
            transform: translateX(5px);
        }

        .result-header {
            padding: 12px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: background 0.3s;
        }

        .result-header.banned-header {
            background: rgba(220, 53, 69, 0.2);
        }

        .result-header.banned-header:hover {
            background: rgba(220, 53, 69, 0.3);
        }

        .result-header.clean-header {
            background: rgba(40, 167, 69, 0.2);
        }

        .result-header.clean-header:hover {
            background: rgba(40, 167, 69, 0.3);
        }

        .result-header.maintenance-header {
            background: rgba(255, 193, 7, 0.2);
        }

        .result-header.maintenance-header:hover {
            background: rgba(255, 193, 7, 0.3);
        }

        .result-header.checking-header {
            background: rgba(116, 185, 255, 0.2);
        }

        .result-header h4 {
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .result-header.banned-header h4 {
            color: #ff6b6b;
        }

        .result-header.clean-header h4 {
            color: #00d4aa;
        }

        .result-header.maintenance-header h4 {
            color: #ffc107;
        }

        .result-header.checking-header h4 {
            color: #74b9ff;
        }

        .status-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .badge-banned {
            background: rgba(220, 53, 69, 0.3);
            color: #ff6b6b;
        }

        .badge-clean {
            background: rgba(40, 167, 69, 0.3);
            color: #00d4aa;
        }

        .badge-maintenance {
            background: rgba(255, 193, 7, 0.3);
            color: #ffc107;
        }

        .badge-checking {
            background: rgba(116, 185, 255, 0.3);
            color: #74b9ff;
        }

        .dropdown-arrow {
            transition: transform 0.3s ease;
            font-size: 0.7rem;
            margin-left: 5px;
        }

        .dropdown-arrow.open {
            transform: rotate(180deg);
        }

        .result-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out, padding 0.3s ease;
            padding: 0 15px;
            background: rgba(0, 0, 0, 0.2);
        }

        .result-body.open {
            max-height: 500px;
            padding: 15px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }

        .info-label {
            color: #8892b0;
            font-size: 0.85rem;
        }

        .info-value {
            color: #fff;
            font-weight: 500;
            font-size: 0.85rem;
        }

        .checking-animation {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .checking-dot {
            width: 8px;
            height: 8px;
            background: #74b9ff;
            border-radius: 50%;
            animation: pulse 1.4s ease-in-out infinite;
        }

        .checking-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .checking-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes pulse {

            0%,
            80%,
            100% {
                transform: scale(0);
                opacity: 0.5;
            }

            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .log-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .log-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .log-header h3 {
            color: #8892b0;
            font-size: 1rem;
        }

        .log-content {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 15px;
            max-height: 200px;
            overflow-y: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
        }

        .log-entry {
            margin-bottom: 5px;
            padding: 3px 0;
        }

        .log-entry.info {
            color: #74b9ff;
        }

        .log-entry.success {
            color: #00d4aa;
        }

        .log-entry.error {
            color: #ff6b6b;
        }

        .log-entry.warning {
            color: #ffc107;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #6c757d;
        }

        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 107, 107, 0.5);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 107, 107, 0.7);
        }

        /* Toast notifications */
        .toast-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .toast {
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 15px 20px;
            margin-top: 10px;
            border-left: 4px solid;
            animation: slideIn 0.3s ease;
        }

        .toast.success {
            border-color: #00d4aa;
        }

        .toast.error {
            border-color: #ff6b6b;
        }

        .toast.warning {
            border-color: #ffc107;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Notification for CORS */
        .cors-notice {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 107, 107, 0.1));
            border: 1px solid rgba(255, 193, 7, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .cors-notice-icon {
            font-size: 1.5rem;
        }

        .cors-notice-content h4 {
            color: #ffc107;
            margin-bottom: 8px;
        }

        .cors-notice-content p {
            color: #8892b0;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .cors-notice-content code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.85rem;
            color: #ff6b6b;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>üî• CraftRise Ban Checker</h1>
            <p>Hesaplarƒ±nƒ±zƒ±n ban durumunu kontrol edin</p>
            <div class="credits">
                <span class="credit-badge">üë®‚Äçüíª yanaksalvo</span>
            </div>
        </header>

        <div class="stats-bar">
            <div class="stat-item">
                <span class="stat-number total" id="totalCount">0</span>
                <span class="stat-label">Toplam</span>
            </div>
            <div class="stat-item">
                <span class="stat-number banned" id="bannedCount">0</span>
                <span class="stat-label">Banlƒ±</span>
            </div>
            <div class="stat-item">
                <span class="stat-number clean" id="cleanCount">0</span>
                <span class="stat-label">Temiz</span>
            </div>
            <div class="stat-item">
                <span class="stat-number maintenance" id="maintenanceCount">0</span>
                <span class="stat-label">Bakƒ±m</span>
            </div>
        </div>

        <div class="cors-notice">
            <span class="cors-notice-icon">‚ö†Ô∏è</span>
            <div class="cors-notice-content">
                <h4>Tarayƒ±cƒ± G√ºvenlik Notu (CORS)</h4>
                <p>
                    Bu uygulama doƒürudan tarayƒ±cƒ±dan CraftRise sunucularƒ±na istek g√∂nderemez (CORS kƒ±sƒ±tlamasƒ±).
                    √áalƒ±≈ümasƒ± i√ßin bir backend proxy sunucusu gereklidir.
                    <code>server.js</code> dosyasƒ±nƒ± √ßalƒ±≈ütƒ±rarak proxy'yi ba≈ülatabilirsiniz.
                </p>
            </div>
        </div>

        <div class="input-card">
            <h2>Hesaplarƒ± Girin</h2>
            <p class="input-description">
                Her satƒ±ra bir kullanƒ±cƒ± adƒ± yazƒ±n. <code>kullaniciadi:sifre</code> formatƒ±nda da girebilirsiniz,
                sadece kullanƒ±cƒ± adƒ± kƒ±smƒ± kontrol edilecektir.
            </p>
            <textarea id="accounts"
                placeholder="kullaniciadi1&#10;kullaniciadi2&#10;kullaniciadi3:sifre&#10;..."></textarea>

            <div class="progress-container" id="progressContainer">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p class="progress-text" id="progressText">0 / 0 kontrol edildi</p>
            </div>

            <div class="btn-group">
                <button class="btn" id="checkBtn" onclick="checkAccounts()">
                    <span class="spinner" id="spinner"></span>
                    <span id="btnText">üöÄ Kontrol Et</span>
                </button>
                <button class="btn btn-secondary" onclick="clearAll()">
                    üóëÔ∏è Temizle
                </button>
            </div>
        </div>

        <div class="results-container">
            <!-- Banlƒ± Hesaplar -->
            <div class="column">
                <div class="column-header banned">
                    <h3>üö´ Banlƒ± Hesaplar (<span id="bannedCountHeader">0</span>)</h3>
                    <button class="export-btn" onclick="exportResults('banned')">üì• ƒ∞ndir</button>
                </div>
                <div id="bannedResults">
                    <div class="empty-state">
                        <div class="empty-state-icon">üîç</div>
                        <p>Hen√ºz banlƒ± hesap yok</p>
                    </div>
                </div>
            </div>

            <!-- Temiz Hesaplar -->
            <div class="column">
                <div class="column-header clean">
                    <h3>‚úÖ Temiz Hesaplar (<span id="cleanCountHeader">0</span>)</h3>
                    <button class="export-btn" onclick="exportResults('clean')">üì• ƒ∞ndir</button>
                </div>
                <div id="cleanResults">
                    <div class="empty-state">
                        <div class="empty-state-icon">üîç</div>
                        <p>Hen√ºz temiz hesap yok</p>
                    </div>
                </div>
            </div>

            <!-- Bakƒ±m/Maintenance -->
            <div class="column">
                <div class="column-header maintenance">
                    <h3>üîß Bakƒ±m Modu (<span id="maintenanceCountHeader">0</span>)</h3>
                    <button class="export-btn" onclick="exportResults('maintenance')">üì• ƒ∞ndir</button>
                </div>
                <div id="maintenanceResults">
                    <div class="empty-state">
                        <div class="empty-state-icon">üîç</div>
                        <p>Bakƒ±m modu tespit edilmedi</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Log Container -->
        <div class="log-container">
            <div class="log-header">
                <h3>üìã Konsol √áƒ±ktƒ±sƒ±</h3>
                <button class="export-btn" onclick="clearLogs()">üóëÔ∏è Temizle</button>
            </div>
            <div class="log-content" id="logContent">
                <div class="log-entry info">Uygulama hazƒ±r. Hesaplarƒ± girin ve "Kontrol Et" butonuna tƒ±klayƒ±n.</div>
            </div>
        </div>
    </div>

    <div class="toast-container" id="toastContainer"></div>

    <script>
        // Configuration
        const PROXY_URL = 'http://localhost:3000';
        const CRAFTRISE_URL = 'https://www.craftrise.com.tr/posts/post-search.php';
        const CHECK_DELAY = 0; // No delay between checks (like original Java)

        // State
        let bannedAccounts = [];
        let cleanAccounts = [];
        let maintenanceAccounts = [];
        let isChecking = false;
        let currentIndex = 0;
        let totalAccounts = 0;

        // Utility functions
        function extractUsername(line) {
            if (!line || line.trim() === '') return null;
            const trimmed = line.trim();
            const colonIndex = trimmed.indexOf(':');
            if (colonIndex === -1) return trimmed;
            return trimmed.substring(0, colonIndex).trim();
        }

        function generateRandomString(length) {
            const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let result = '';
            for (let i = 0; i < length; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        function generateFakeCookie() {
            const phpsessid = generateRandomString(26);
            const cf = generateRandomString(32);
            return `PHPSESSID=${phpsessid}; cf_clearance=${cf};`;
        }

        // Logging
        function log(message, type = 'info') {
            const logContent = document.getElementById('logContent');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            const timestamp = new Date().toLocaleTimeString('tr-TR');
            entry.textContent = `[${timestamp}] ${message}`;
            logContent.appendChild(entry);
            logContent.scrollTop = logContent.scrollHeight;
        }

        function clearLogs() {
            document.getElementById('logContent').innerHTML =
                '<div class="log-entry info">Konsol temizlendi.</div>';
        }

        // Toast notifications
        function showToast(message, type = 'info') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            container.appendChild(toast);

            setTimeout(() => {
                toast.style.animation = 'slideIn 0.3s ease reverse';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Update UI counts
        function updateCounts() {
            document.getElementById('totalCount').textContent = totalAccounts;
            document.getElementById('bannedCount').textContent = bannedAccounts.length;
            document.getElementById('cleanCount').textContent = cleanAccounts.length;
            document.getElementById('maintenanceCount').textContent = maintenanceAccounts.length;

            document.getElementById('bannedCountHeader').textContent = bannedAccounts.length;
            document.getElementById('cleanCountHeader').textContent = cleanAccounts.length;
            document.getElementById('maintenanceCountHeader').textContent = maintenanceAccounts.length;
        }

        function updateProgress() {
            const percent = totalAccounts > 0 ? (currentIndex / totalAccounts) * 100 : 0;
            document.getElementById('progressFill').style.width = `${percent}%`;
            document.getElementById('progressText').textContent =
                `${currentIndex} / ${totalAccounts} kontrol edildi`;
        }

        // Add result cards
        function addResultCard(username, status, originalLine) {
            let containerId, headerClass, icon, badgeClass, badgeText;

            switch (status) {
                case 'banned':
                    containerId = 'bannedResults';
                    headerClass = 'banned-header';
                    icon = 'üö´';
                    badgeClass = 'badge-banned';
                    badgeText = 'BANLI';
                    bannedAccounts.push(originalLine);
                    break;
                case 'clean':
                    containerId = 'cleanResults';
                    headerClass = 'clean-header';
                    icon = '‚úÖ';
                    badgeClass = 'badge-clean';
                    badgeText = 'TEMƒ∞Z';
                    cleanAccounts.push(originalLine);
                    break;
                case 'maintenance':
                    containerId = 'maintenanceResults';
                    headerClass = 'maintenance-header';
                    icon = 'üîß';
                    badgeClass = 'badge-maintenance';
                    badgeText = 'BAKIM';
                    maintenanceAccounts.push(originalLine);
                    break;
            }

            const container = document.getElementById(containerId);

            // Remove empty state if exists
            const emptyState = container.querySelector('.empty-state');
            if (emptyState) emptyState.remove();

            const cardId = `card-${status}-${Date.now()}`;
            const card = document.createElement('div');
            card.className = 'result-card';
            card.id = cardId;
            card.innerHTML = `
                <div class="result-header ${headerClass}" onclick="toggleDropdown('${cardId}')">
                    <h4>${icon} ${username} <span class="dropdown-arrow" id="arrow-${cardId}">‚ñº</span></h4>
                    <span class="status-badge ${badgeClass}">${badgeText}</span>
                </div>
                <div class="result-body" id="body-${cardId}">
                    <div class="info-row">
                        <span class="info-label">üë§ Kullanƒ±cƒ± Adƒ±:</span>
                        <span class="info-value">${username}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">üìù Orijinal Satƒ±r:</span>
                        <span class="info-value">${originalLine}</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">üìä Durum:</span>
                        <span class="info-value">${badgeText}</span>
                    </div>
                </div>
            `;

            container.appendChild(card);
            updateCounts();
        }

        function addCheckingCard(username) {
            const checkingContainer = document.getElementById('cleanResults');
            const cardId = `checking-${username}`;

            const card = document.createElement('div');
            card.className = 'result-card';
            card.id = cardId;
            card.innerHTML = `
                <div class="result-header checking-header">
                    <h4>‚è≥ ${username}</h4>
                    <div class="checking-animation">
                        <span class="checking-dot"></span>
                        <span class="checking-dot"></span>
                        <span class="checking-dot"></span>
                    </div>
                </div>
            `;

            return card;
        }

        function removeCheckingCard(username) {
            const card = document.getElementById(`checking-${username}`);
            if (card) card.remove();
        }

        function toggleDropdown(cardId) {
            const body = document.getElementById(`body-${cardId}`);
            const arrow = document.getElementById(`arrow-${cardId}`);

            if (body.classList.contains('open')) {
                body.classList.remove('open');
                arrow.classList.remove('open');
            } else {
                body.classList.add('open');
                arrow.classList.add('open');
            }
        }

        // Check single account
        async function checkAccount(username, originalLine) {
            try {
                const response = await fetch(`${PROXY_URL}/check`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ username })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error: ${response.status}`);
                }

                const result = await response.json();
                return result;

            } catch (error) {
                // If proxy fails, try direct request (will likely fail due to CORS)
                log(`Proxy baƒülantƒ± hatasƒ±: ${error.message}`, 'error');
                throw error;
            }
        }

        // Main check function
        async function checkAccounts() {
            const accountsText = document.getElementById('accounts').value.trim();

            if (!accountsText) {
                showToast('L√ºtfen kontrol edilecek hesaplarƒ± girin!', 'warning');
                return;
            }

            const lines = accountsText.split('\n').filter(line => line.trim() !== '');

            if (lines.length === 0) {
                showToast('Ge√ßerli hesap bulunamadƒ±!', 'warning');
                return;
            }

            // Reset state
            bannedAccounts = [];
            cleanAccounts = [];
            maintenanceAccounts = [];
            currentIndex = 0;
            totalAccounts = lines.length;
            isChecking = true;

            // Reset UI
            document.getElementById('bannedResults').innerHTML = '';
            document.getElementById('cleanResults').innerHTML = '';
            document.getElementById('maintenanceResults').innerHTML = '';

            document.getElementById('checkBtn').disabled = true;
            document.getElementById('spinner').style.display = 'block';
            document.getElementById('btnText').textContent = 'Kontrol Ediliyor...';
            document.getElementById('progressContainer').style.display = 'block';

            updateCounts();
            updateProgress();

            log(`Toplam ${lines.length} hesap kontrol edilecek...`, 'info');

            for (let i = 0; i < lines.length; i++) {
                if (!isChecking) break;

                const line = lines[i].trim();
                const username = extractUsername(line);

                if (!username) {
                    log(`Ge√ßersiz satƒ±r: ${line}`, 'warning');
                    currentIndex++;
                    updateProgress();
                    continue;
                }

                log(`[${i + 1}/${lines.length}] ${username} kontrol ediliyor...`, 'info');

                try {
                    const result = await checkAccount(username, line);

                    if (result.maintenance) {
                        log(`${username} ‚Üí BAKIM MODU / RATE LIMIT TESPƒ∞T EDƒ∞LDƒ∞!`, 'warning');
                        log(`‚õî Kontrol durduruldu! Rate limit yemi≈ü olabilirsiniz.`, 'error');
                        addResultCard(username, 'maintenance', line);
                        showToast(`Rate Limit! Kontrol durduruldu.`, 'error');
                        isChecking = false; // Stop the loop
                        break; // Exit the for loop
                    } else if (result.banned) {
                        log(`${username} ‚Üí BANLI!`, 'error');
                        addResultCard(username, 'banned', line);
                    } else {
                        log(`${username} ‚Üí TEMƒ∞Z`, 'success');
                        addResultCard(username, 'clean', line);
                    }

                } catch (error) {
                    log(`${username} ‚Üí HATA: ${error.message}`, 'error');
                    // On error, add to clean with error note
                    addResultCard(username, 'clean', `${line} # HATA: ${error.message}`);
                }

                currentIndex++;
                updateProgress();

                // Delay between requests
                if (i < lines.length - 1) {
                    await new Promise(resolve => setTimeout(resolve, CHECK_DELAY));
                }
            }

            // Finish
            isChecking = false;
            document.getElementById('checkBtn').disabled = false;
            document.getElementById('spinner').style.display = 'none';
            document.getElementById('btnText').textContent = 'üöÄ Kontrol Et';

            log('', 'info');
            log('T√ºm kontroller tamamlandƒ±!', 'success');
            log(`Toplam kontrol edilen: ${totalAccounts}`, 'info');
            log(`Banlƒ± hesap sayƒ±sƒ±: ${bannedAccounts.length}`, 'error');
            log(`Temiz hesap sayƒ±sƒ±: ${cleanAccounts.length}`, 'success');
            log(`Bakƒ±m modu: ${maintenanceAccounts.length}`, 'warning');

            showToast('T√ºm kontroller tamamlandƒ±!', 'success');

            // Add empty states if needed
            if (bannedAccounts.length === 0) {
                document.getElementById('bannedResults').innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">‚ú®</div>
                        <p>Banlƒ± hesap bulunamadƒ±</p>
                    </div>`;
            }
            if (cleanAccounts.length === 0) {
                document.getElementById('cleanResults').innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üîç</div>
                        <p>Temiz hesap bulunamadƒ±</p>
                    </div>`;
            }
            if (maintenanceAccounts.length === 0) {
                document.getElementById('maintenanceResults').innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">‚ú®</div>
                        <p>Bakƒ±m modu tespit edilmedi</p>
                    </div>`;
            }
        }

        // Export results
        function exportResults(type) {
            let accounts, filename;

            switch (type) {
                case 'banned':
                    accounts = bannedAccounts;
                    filename = 'banli_hesaplar.txt';
                    break;
                case 'clean':
                    accounts = cleanAccounts;
                    filename = 'temiz_hesaplar.txt';
                    break;
                case 'maintenance':
                    accounts = maintenanceAccounts;
                    filename = 'maintenance_hesaplar.txt';
                    break;
            }

            if (accounts.length === 0) {
                showToast('ƒ∞ndirilecek hesap yok!', 'warning');
                return;
            }

            const content = accounts.join('\n');
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);

            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            showToast(`${accounts.length} hesap indirildi!`, 'success');
            log(`${accounts.length} hesap ${filename} olarak indirildi.`, 'info');
        }

        // Clear all
        function clearAll() {
            document.getElementById('accounts').value = '';
            document.getElementById('bannedResults').innerHTML = `
                <div class="empty-state">
                    <div class="empty-state-icon">üîç</div>
                    <p>Hen√ºz banlƒ± hesap yok</p>
                </div>`;
            document.getElementById('cleanResults').innerHTML = `
                <div class="empty-state">
                    <div class="empty-state-icon">üîç</div>
                    <p>Hen√ºz temiz hesap yok</p>
                </div>`;
            document.getElementById('maintenanceResults').innerHTML = `
                <div class="empty-state">
                    <div class="empty-state-icon">üîç</div>
                    <p>Bakƒ±m modu tespit edilmedi</p>
                </div>`;

            bannedAccounts = [];
            cleanAccounts = [];
            maintenanceAccounts = [];
            totalAccounts = 0;
            currentIndex = 0;

            updateCounts();
            document.getElementById('progressContainer').style.display = 'none';
            document.getElementById('progressFill').style.width = '0%';

            log('T√ºm veriler temizlendi.', 'info');
            showToast('T√ºm veriler temizlendi!', 'success');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            log('CraftRise Ban Checker hazƒ±r!', 'success');
        });
    </script>
</body>

</html>